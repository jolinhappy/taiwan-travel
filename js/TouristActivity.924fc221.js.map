{"version":3,"sources":["webpack:///./src/views/TouristActivity.vue?422c","webpack:///./src/views/TouristActivity.vue?4045","webpack:///./src/views/TouristActivity.vue","webpack:///./src/views/TouristActivity.vue?b8c8"],"names":["_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","key","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_Carousel","_component_Card","_component_Pagination","_component_MainCardsListLayout","_component_DetailDialog","header","onSearch","handleSearch","title","currentCity","description","card","_a","currentPageResult","length","spot","ID","onOpen","openDetail","footer","totalPages","currentPage","onChange","handlePageChange","_","modelValue","isShowDetail","$event","scenticDetail","name","components","MainCardsListLayout","setup","_this","this","route","searchResult","pageSize","value","getCityText","location","forEach","item","getCityActivities","city","subCategory","res_1","res","_b","error_1","_c","label","trys","push","getAllActivities","sent","data","Class1","toString","getOneCityActivities","console","log","getTotalPages","Math","ceil","getCurrentPageResult","endIndex","startIndex","slice","v","created","$route","params","__exports__"],"mappings":"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","file":"js/TouristActivity.924fc221.js","sourcesContent":["/* unplugin-vue-components disabled */export * from \"-!../../node_modules/unplugin/dist/webpack/loaders/transform.js??ref--38-0!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TouristActivity.vue?vue&type=style&index=0&id=1f80d4ac&lang=scss\"","import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx } from \"vue\";\r\nvar _hoisted_1 = /*#__PURE__*/ _createTextVNode(\"台灣的各個美景，都美不勝收。\");\r\nvar _hoisted_2 = /*#__PURE__*/ _createElementVNode(\"br\", null, null, -1);\r\nvar _hoisted_3 = /*#__PURE__*/ _createTextVNode(\"等你一同來發現這座寶島的奧妙！\");\r\nvar _hoisted_4 = {\r\n    key: 1,\r\n    class: \"no-data\"\r\n};\r\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\r\n    var _component_Carousel = _resolveComponent(\"Carousel\");\r\n    var _component_Card = _resolveComponent(\"Card\");\r\n    var _component_Pagination = _resolveComponent(\"Pagination\");\r\n    var _component_MainCardsListLayout = _resolveComponent(\"MainCardsListLayout\");\r\n    var _component_DetailDialog = _resolveComponent(\"DetailDialog\");\r\n    return (_openBlock(), _createElementBlock(_Fragment, null, [\r\n        _createVNode(_component_MainCardsListLayout, null, {\r\n            header: _withCtx(function () { return [\r\n                _createVNode(_component_Carousel, { onSearch: _ctx.handleSearch }, null, 8, [\"onSearch\"])\r\n            ]; }),\r\n            title: _withCtx(function () { return [\r\n                _createTextVNode(_toDisplayString(_ctx.currentCity) + \"景點\", 1)\r\n            ]; }),\r\n            description: _withCtx(function () { return [\r\n                _hoisted_1,\r\n                _hoisted_2,\r\n                _hoisted_3\r\n            ]; }),\r\n            card: _withCtx(function () {\r\n                var _a;\r\n                return [\r\n                    (((_a = _ctx.currentPageResult) === null || _a === void 0 ? void 0 : _a.length) > 0)\r\n                        ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(_ctx.currentPageResult, function (spot) {\r\n                            return (_openBlock(), _createBlock(_component_Card, {\r\n                                spot: spot,\r\n                                key: spot.ID,\r\n                                onOpen: _ctx.openDetail\r\n                            }, null, 8, [\"spot\", \"onOpen\"]));\r\n                        }), 128))\r\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \"查無相關資料\"))\r\n                ];\r\n            }),\r\n            footer: _withCtx(function () { return [\r\n                (_ctx.totalPages !== 0)\r\n                    ? (_openBlock(), _createBlock(_component_Pagination, {\r\n                        key: 0,\r\n                        currentPage: _ctx.currentPage,\r\n                        totalPages: _ctx.totalPages,\r\n                        onChange: _ctx.handlePageChange\r\n                    }, null, 8, [\"currentPage\", \"totalPages\", \"onChange\"]))\r\n                    : _createCommentVNode(\"\", true)\r\n            ]; }),\r\n            _: 1\r\n        }),\r\n        _createVNode(_component_DetailDialog, {\r\n            modelValue: _ctx.isShowDetail,\r\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) { return ((_ctx.isShowDetail) = $event); }),\r\n            scenticDetail: _ctx.scenticDetail\r\n        }, null, 8, [\"modelValue\", \"scenticDetail\"])\r\n    ], 64));\r\n}\r\n","import { __awaiter, __generator } from \"tslib\";\r\nimport { defineComponent, ref } from 'vue';\r\nimport MainCardsListLayout from '@/layout/MainCardsListLayout.vue';\r\nimport apiHandler from '@/api-handlers/api-handler';\r\nimport { taiwanLocation } from '@/utils/location';\r\nimport { useRoute } from 'vue-router';\r\nexport default defineComponent({\r\n    name: 'TouristActivity',\r\n    components: {\r\n        MainCardsListLayout: MainCardsListLayout,\r\n    },\r\n    setup: function () {\r\n        var _this = this;\r\n        var route = useRoute();\r\n        var isShowDetail = ref(false);\r\n        var scenticDetail = ref(null);\r\n        var searchResult = ref([]);\r\n        var currentCity = ref('');\r\n        var pageSize = 9;\r\n        var currentPage = ref(1);\r\n        var totalPages = ref(0);\r\n        var currentPageResult = ref(null);\r\n        var openDetail = function (spot) {\r\n            isShowDetail.value = true;\r\n            scenticDetail.value = spot;\r\n        };\r\n        var getCityText = function (location) {\r\n            taiwanLocation.forEach(function (item) {\r\n                if (item.value === location) {\r\n                    currentCity.value = item.name;\r\n                }\r\n                if (!location) {\r\n                    currentCity.value = '全臺';\r\n                }\r\n            });\r\n        };\r\n        var getCityActivities = function (city, subCategory) { return __awaiter(_this, void 0, void 0, function () {\r\n            var res_1, _a, res, _b, error_1;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _c.trys.push([0, 10, , 11]);\r\n                        if (!!city) return [3 /*break*/, 5];\r\n                        return [4 /*yield*/, apiHandler.getAllActivities()];\r\n                    case 1:\r\n                        res_1 = _c.sent();\r\n                        if (!res_1) return [3 /*break*/, 4];\r\n                        if (!(!subCategory || subCategory === '所有類別')) return [3 /*break*/, 3];\r\n                        _a = searchResult;\r\n                        return [4 /*yield*/, res_1.data];\r\n                    case 2:\r\n                        _a.value = _c.sent();\r\n                        return [2 /*return*/];\r\n                    case 3:\r\n                        if (subCategory) {\r\n                            res_1.data.forEach(function (item) {\r\n                                var _a;\r\n                                if (item.Class1 && item.Class1.toString() === subCategory) {\r\n                                    (_a = searchResult.value) === null || _a === void 0 ? void 0 : _a.push(item);\r\n                                }\r\n                            });\r\n                        }\r\n                        _c.label = 4;\r\n                    case 4: return [2 /*return*/];\r\n                    case 5: return [4 /*yield*/, apiHandler.getOneCityActivities(city)];\r\n                    case 6:\r\n                        res = _c.sent();\r\n                        if (!res) return [3 /*break*/, 9];\r\n                        if (!(!subCategory || subCategory === '所有類別')) return [3 /*break*/, 8];\r\n                        _b = searchResult;\r\n                        return [4 /*yield*/, res.data];\r\n                    case 7:\r\n                        _b.value = _c.sent();\r\n                        return [2 /*return*/];\r\n                    case 8:\r\n                        if (subCategory) {\r\n                            res.data.forEach(function (item) {\r\n                                var _a;\r\n                                if (item.Class1 && item.Class1.toString() === subCategory) {\r\n                                    (_a = searchResult.value) === null || _a === void 0 ? void 0 : _a.push(item);\r\n                                }\r\n                            });\r\n                        }\r\n                        _c.label = 9;\r\n                    case 9: return [3 /*break*/, 11];\r\n                    case 10:\r\n                        error_1 = _c.sent();\r\n                        console.log(error_1);\r\n                        return [3 /*break*/, 11];\r\n                    case 11: return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        var getTotalPages = function () {\r\n            var _a;\r\n            if (searchResult.value) {\r\n                totalPages.value = Math.ceil(((_a = searchResult.value) === null || _a === void 0 ? void 0 : _a.length) / pageSize);\r\n            }\r\n        };\r\n        var getCurrentPageResult = function () {\r\n            var _a;\r\n            if (searchResult.value) {\r\n                var endIndex = currentPage.value * pageSize;\r\n                var startIndex = endIndex - pageSize;\r\n                currentPageResult.value = (_a = searchResult.value) === null || _a === void 0 ? void 0 : _a.slice(startIndex, endIndex);\r\n            }\r\n        };\r\n        var handlePageChange = function (v) {\r\n            currentPage.value = v;\r\n            getCurrentPageResult();\r\n        };\r\n        var handleSearch = function (v) { return __awaiter(_this, void 0, void 0, function () {\r\n            var location, subCategory;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        location = v.location, subCategory = v.subCategory;\r\n                        getCityText(location);\r\n                        return [4 /*yield*/, getCityActivities(location, subCategory)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, getTotalPages()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, getCurrentPageResult()];\r\n                    case 3:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); };\r\n        return {\r\n            route: route,\r\n            currentPageResult: currentPageResult,\r\n            currentCity: currentCity,\r\n            totalPages: totalPages,\r\n            currentPage: currentPage,\r\n            isShowDetail: isShowDetail,\r\n            scenticDetail: scenticDetail,\r\n            openDetail: openDetail,\r\n            getCityActivities: getCityActivities,\r\n            getCityText: getCityText,\r\n            getTotalPages: getTotalPages,\r\n            getCurrentPageResult: getCurrentPageResult,\r\n            handlePageChange: handlePageChange,\r\n            handleSearch: handleSearch,\r\n            searchResult: searchResult,\r\n        };\r\n    },\r\n    created: function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, location, subCategory;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this.$route.params];\r\n                    case 1:\r\n                        _a = _b.sent(), location = _a.location, subCategory = _a.subCategory;\r\n                        return [4 /*yield*/, this.getCityText(location)];\r\n                    case 2:\r\n                        _b.sent();\r\n                        return [4 /*yield*/, this.getCityActivities(location, subCategory)];\r\n                    case 3:\r\n                        _b.sent();\r\n                        return [4 /*yield*/, this.getTotalPages()];\r\n                    case 4:\r\n                        _b.sent();\r\n                        return [4 /*yield*/, this.getCurrentPageResult()];\r\n                    case 5:\r\n                        _b.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    }\r\n});\r\n","/* unplugin-vue-components disabled */import { render } from \"./TouristActivity.vue?vue&type=template&id=1f80d4ac&ts=true\"\nimport script from \"./TouristActivity.vue?vue&type=script&lang=ts\"\nexport * from \"./TouristActivity.vue?vue&type=script&lang=ts\"\n\nimport \"./TouristActivity.vue?vue&type=style&index=0&id=1f80d4ac&lang=scss\"\n\nimport exportComponent from \"D:\\\\taiwan-travel\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}